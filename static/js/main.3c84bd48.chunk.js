(this.webpackJsonpstandup=this.webpackJsonpstandup||[]).push([[0],{40:function(e,t,a){e.exports=a.p+"static/media/stand_up_logo.190ee485.png"},42:function(e,t,a){e.exports=a(78)},47:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"default",(function(){return b}));var r=a(0),i=a.n(r),c=a(18),s=a.n(c),o=(a(47),a(13)),l=a(15),u=a(2),d=a(24),f=a(16),m=a(38),p=a(39);function b(e,t){if(console.log("dispatch getArticles",e,t.type),"USER"===t.type){var a=[],n=firebase.auth().currentUser;return e.articles.forEach((function(e){e.user.uid&&n&&e.user.uid===n.uid&&a.push(e)})),Object.assign({},e,{articles:a})}return t.type,Object.assign({},e,t)}var h=Object(f.c)(Object(d.a)(Object(d.a)({},n),{},{routing:m.routerReducer})),v=Object(f.d)(h,Object(f.a)(p.a)),g=a(3),y=a(4),E=a(9),O=a(6),j=a(5),k=a(40),N=a.n(k),C=(a(54),a(55),a(56),a(57),function(){function e(t){Object(g.a)(this,e),firebase.apps&&firebase.apps.length>0?this.firebaseApp=firebase.apps[0]:this.firebaseApp=firebase.initializeApp(t)}return Object(y.a)(e,[{key:"getFirebaseApp",value:function(){return this.firebaseApp}},{key:"insert",value:function(e){return firebase.database().ref().child("posts").push(e)}},{key:"update",value:function(e,t){var a={};return a["/posts/"+e]=t,a["/user-posts/genji/"+e]=t,firebase.database().ref().update(a)}},{key:"remove",value:function(e){return new Promise((function(t){firebase.database().ref("/posts/").child(e).remove(),firebase.database().ref("/user-posts/genji/").child(e).remove(),t(e)}))}},{key:"off",value:function(){return firebase.database().ref().off()}},{key:"newKey",value:function(){return firebase.database().ref().child("posts").push().key}},{key:"list",value:function(e,t){firebase.database().ref("posts").orderByKey().limitToLast(e).on("value",(function(e){t(e)}))}},{key:"getArticle",value:function(e){return new Promise((function(t){firebase.database().ref("/posts/"+e).on("value",(function(e){t(e)}))}))}},{key:"getUI",value:function(){return new firebaseui.auth.AuthUI(firebase.auth())}},{key:"logout",value:function(){return firebase.auth().signOut()}}]),e}()),_={apiKey:"AIzaSyDfVWmfYX0DK1Xkn_OBFF2k279dHZvYUJc",authDomain:"standup-7a29b.firebaseapp.com",databaseURL:"https://standup-7a29b.firebaseio.com",storageBucket:"standup-7a29b.appspot.com",messagingSenderId:"574311250064"},U=new C(_);function I(){return console.log("action loadArticles"),function(e){U.list(25,(function(t){return e(function(e){var t=[];if(e.forEach((function(e){var a=e.val();a.key=e.key,t.push(a)})),console.log("action getArticles",t),t&&t.length>0)return{type:"ALL",articles:t.reverse()}}(t))}))}}var S=function(e){Object(O.a)(a,e);var t=Object(j.a)(a);function a(){return Object(g.a)(this,a),t.apply(this,arguments)}return Object(y.a)(a,[{key:"logout",value:function(){firebase.auth().signOut()}},{key:"render",value:function(){var e=this,t=this.props.dispatch;return this.props.isPop?i.a.createElement("div",{className:"card_pop"},i.a.createElement("div",{className:"card_pop_arrow"}),i.a.createElement("div",null,i.a.createElement("a",{href:"#",onClick:function(){return t({type:"USER"})}},"\ub0b4 \uae00\ub9cc \ubcf4\uae30")),i.a.createElement("div",null,i.a.createElement("a",{href:"#",onClick:function(){return t(I())}},"\uc804\uccb4 \uae00 \ubcf4\uae30")),i.a.createElement("div",null,i.a.createElement("a",{href:"#",onClick:function(){return e.logout()}},"\ub85c\uadf8\uc544\uc6c3"))):i.a.createElement("div",null)}}]),a}(r.Component),A=Object(o.b)()(S),w=function(e){Object(O.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(g.a)(this,a),(n=t.call(this,e)).state={user:void 0,isPop:!1},n}return Object(y.a)(a,[{key:"componentWillMount",value:function(){var e=this;firebase.auth().onAuthStateChanged((function(t){t?e.setState({user:t}):e.setState({user:void 0})}))}},{key:"popProfile",value:function(){this.setState({isPop:!this.state.isPop})}},{key:"render",value:function(){var e=this,t=this.state.user;return t?i.a.createElement("span",null,i.a.createElement("div",{className:"profile_name"},i.a.createElement("a",{href:"#",onClick:function(){return e.popProfile()}},t.displayName)),i.a.createElement("div",{className:"profile_img_wrap"},i.a.createElement("img",{src:t.photoURL,alt:"profiles",className:"profile_img"})),i.a.createElement(A,{isPop:this.state.isPop})):i.a.createElement("div",{className:"profile_name"},i.a.createElement(l.b,{to:"/login"},"\ub85c\uadf8\uc778"))}}]),a}(r.Component),P=a(41),L=a.n(P);a(76);var R=function(e){Object(O.a)(a,e);var t=Object(j.a)(a);function a(){return Object(g.a)(this,a),t.apply(this,arguments)}return Object(y.a)(a,[{key:"render",value:function(){var e=this.props.cardInfo;return e?i.a.createElement("a",{className:"card",href:e.url,target:"_blank"},i.a.createElement("div",{className:"card_image"},i.a.createElement("img",{src:e.links.thumbnail[0].href,alt:e.meta.title,className:"width100 card_img"})),i.a.createElement("div",{className:"borderTop"},i.a.createElement("div",{className:"card_text"},i.a.createElement("p",{className:"card_title"},e.meta.title),i.a.createElement("p",{className:"card_desc"},e.meta.description),i.a.createElement("p",{className:"card_provider"},e.meta.site)))):null}}]),a}(r.Component),x=function(e){Object(O.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(g.a)(this,a),(n=t.call(this,e)).handleSubmit=n.handleSubmit.bind(Object(E.a)(n)),n.onPaste=n.onPaste.bind(Object(E.a)(n)),n.editorChange=n.editorChange.bind(Object(E.a)(n)),n.getCard=n.getCard.bind(Object(E.a)(n)),n.hasValue=n.hasValue.bind(Object(E.a)(n)),n.detectURL=n.detectURL.bind(Object(E.a)(n)),n.getArticle=n.getArticle.bind(Object(E.a)(n)),n.getForcedState=n.getForcedState.bind(Object(E.a)(n)),n.state={embedlyUrl:void 0,content:void 0},n}return Object(y.a)(a,[{key:"getForcedState",value:function(e,t){return new Promise((function(a){var n;e?(n=e,L.a.get("http://iframe.ly/api/iframely",{params:{url:n,api_key:"0bf29cffabe2e8590d76f8"}})).then((function(n){var r=Object.assign({},n.data);a({embedlyUrl:e,content:t,cardInfo:r})})).catch((function(e){a({embedlyUrl:void 0,content:void 0,cardInfo:void 0})})):a({content:t})}))}},{key:"handleSubmit",value:function(e){this.hasValue(this.state.content)&&(e.preventDefault(),this.props.submit(this.getArticle()),this.setState({embedlyUrl:void 0,content:void 0,cardInfo:void 0}))}},{key:"onPaste",value:function(e){var t=this,a=e.currentTarget.textContent;e.clipboardData.items[0].getAsString((function(e){var n=t.detectURL(e);n&&t.getForcedState(n,a+e).then((function(e){t.setState(e)}))}))}},{key:"editorChange",value:function(e){var t=this,a=this.detectURL(e.currentTarget.textContent);this.state.embedlyUrl||32!==e.keyCode&&13!==e.keyCode||!a||this.getForcedState(a,e.currentTarget.textContent).then((function(e){return t.setState(e)}))}},{key:"getArticle",value:function(){var e={},t=firebase.auth().currentUser;return e.user={email:t.email,displayName:t.displayName,uid:t.uid},e.content=this.state.content,this.state.embedlyUrl&&(e.cardInfo=this.state.cardInfo),e}},{key:"detectURL",value:function(e){var t=e.match(/(https?:\/\/[^\s]+)/g)||e.match(/(www.[^\s]+)/g);return null!==t&&t.length>0?t[0]:void 0}},{key:"getCard",value:function(e){return e?i.a.createElement("div",null,e):i.a.createElement("div",null)}},{key:"hasValue",value:function(e){return!(!e||"string"!==typeof e)&&(!!e&&""!==e.trim())}},{key:"render",value:function(){return i.a.createElement("div",{className:"wrapEditor"},i.a.createElement("div",{className:"editor_header"},i.a.createElement("div",{className:"today_title"},"\ubb34\uc5c7\uc744 \uacf5\uc720\ud560\uae4c\uc694?"),i.a.createElement(w,null)),i.a.createElement("div",{className:"textEditor"},i.a.createElement("div",{className:"innerEdit",contentEditable:"true",placeholder:"\uae00\uc4f0\uae30...",onPaste:this.onPaste,onKeyUp:this.editorChange,dangerouslySetInnerHTML:{__html:this.state.content}}),i.a.createElement(R,{cardInfo:this.state.cardInfo})),i.a.createElement("div",{className:"actionBar"},i.a.createElement("button",{className:"upload",disabled:!this.hasValue(this.state.content),onClick:this.handleSubmit},i.a.createElement("span",null,"\uc2a4\ud0e0\ub4dc\uc5c5!"))))}}]),a}(r.Component),F=(a(77),function(e){Object(O.a)(a,e);var t=Object(j.a)(a);function a(){return Object(g.a)(this,a),t.apply(this,arguments)}return Object(y.a)(a,[{key:"componentWillMount",value:function(){(0,this.props.dispatch)(I())}},{key:"createCard",value:function(e,t){return i.a.createElement("li",{className:"list_row",key:e.key},i.a.createElement("pre",{className:"common_margin grey_text"},e.content),e.cardInfo?i.a.createElement(R,{cardInfo:e.cardInfo}):"")}},{key:"render",value:function(){return this.props.articles&&this.props.articles.length>0?i.a.createElement("ul",null,this.props.articles.map(this.createCard)):i.a.createElement("div",{key:"015b"})}}]),a}(r.Component)),D=Object(o.b)((function(e){return console.log("CardList get state",e),{articles:e.default.articles}}))(F),V=function(e){Object(O.a)(a,e);var t=Object(j.a)(a);function a(){var e;return Object(g.a)(this,a),(e=t.call(this)).submit=e.submit.bind(Object(E.a)(e)),e}return Object(y.a)(a,[{key:"submit",value:function(e){var t;e&&((0,this.props.dispatch)((t=e,function(e){U.update(U.newKey(),t)})),this.forceUpdate())}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"App-header"},i.a.createElement(l.b,{to:"/standup"},i.a.createElement("img",{src:N.a,className:"App-logo",alt:"logo"}))),i.a.createElement(x,{submit:this.submit}),i.a.createElement(D,{cardInfo:this.cardInfo}))}}]),a}(r.Component),K=Object(o.b)()(V),T=function(e){Object(O.a)(a,e);var t=Object(j.a)(a);function a(){return Object(g.a)(this,a),t.apply(this,arguments)}return Object(y.a)(a,[{key:"render",value:function(){return i.a.createElement("div",null,"Not Found!")}}]),a}(r.Component),B=function(e){Object(O.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(g.a)(this,a),(n=t.call(this,e)).ui=new C(_).getUI(),n}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e={signInSuccessUrl:window.location.origin,signInOptions:[firebase.auth.GoogleAuthProvider.PROVIDER_ID]};this.ui.start("#firebaseui-auth",e)}},{key:"componentWillUnmount",value:function(){this.ui.reset()}},{key:"render",value:function(){return i.a.createElement("div",{id:"firebaseui-auth"})}}]),a}(r.Component);function M(){return i.a.createElement(o.a,{store:v},i.a.createElement(l.a,null,i.a.createElement(u.c,null,i.a.createElement(u.a,{exact:!0,path:"/standup"},i.a.createElement(K,null)),i.a.createElement(u.a,{exact:!0,path:"/login"},i.a.createElement(B,null)),i.a.createElement(u.a,null,i.a.createElement(T,null)))))}s.a.render(i.a.createElement(M,null),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.3c84bd48.chunk.js.map